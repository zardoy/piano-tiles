(this["webpackJsonppiano-tiles"]=this["webpackJsonppiano-tiles"]||[]).push([[0],{62:function(t,e,n){},63:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n(20),r=n.n(a),o=n(9),c=n(89),h=n(38),s=n(33),l=n(28),d=n.n(l),u=n(25),f=n(83),j=n(85),b=n(87),g=n(64),v=n(86),m=n(2),w={maxWidth:600,tilesQuantity:{width:4,height:4},showKeyboardOrGamepadHints:!0},x={1:"D A",2:"F B",3:"J X",4:"K Y"},O=function(){return d.a.random(w.tilesQuantity.width-1)},p=Object(f.a)({canvas:{width:"100%",height:"100vh",overflow:"hidden",maxWidth:w.maxWidth},score:{position:"fixed",top:0,left:0,right:0,fontFamily:"Graduate",fontWeight:"bold",pointerEvents:"none"},backButton:{position:"fixed",top:0,left:0,fontSize:"1.2em"}}),y=function(){var t=p(),e=Object(i.useRef)(null),n=Object(i.useState)(0),a=Object(h.a)(n,2),r=a[0],o=a[1];return Object(i.useEffect)((function(){var t=e.current,n=t.getContext("2d"),i=function(){return{width:t.width/a.width,height:t.height/a.height}},a=w.tilesQuantity,r=d.a.times(a.height+1,O),c=0,l="touch",u=function(){n.clearRect(0,0,t.width,t.height),n.lineWidth=.5,n.beginPath();var e=i(),o=c*e.height;d.a.times(a.width,(function(e){var i=e/a.width*t.width;n.moveTo(i,0),n.lineTo(i,t.height)})),d.a.times(a.height,(function(i){var a=i*e.height+o;n.moveTo(0,a),n.lineTo(t.width,a)})),n.stroke();if(r.forEach((function(t,i){var a=r.length-1-i;!function(t,i,a){void 0!==a&&(n.fillStyle="#afaeae");var r={x:t*e.width,y:i*e.height+o};n.fillRect(r.x,r.y,e.width,e.height),n.fillStyle="black",a&&n.fillRect(r.x+a,r.y+a,e.width-2*a,e.height-2*a)}(t,i-1,0===a?0:1===a&&o?Math.min(o,10):void 0)})),"touch"!==l&&w.showKeyboardOrGamepadHints){n.fillStyle="white",n.font="60px sans-serif",n.textAlign="center";var h=r.slice(-2)[0]+1,s=a.width>4?h.toString():x[h].split(" ")[0];n.fillText("keyboard"===l?s:x[h].split(" ")[1],e.width*r.slice(-2)[0]+e.width/2,e.height*(a.height-2)+e.height/2),n.fillStyle="black"}},f=function(){t.width=Math.min(window.innerWidth,w.maxWidth),t.height=window.innerHeight,u()};f();var j=function(t){if(t===r.slice(-2)[0]){o((function(t){return t+1}));var e=setInterval((function(){(c+=.15)>=1&&(clearInterval(e),c=0,r.pop(),r.unshift(O())),u()}),5)}else console.log("Wrong tile",t,r.slice(-2)[0]),o(0);u()},b=function(e){l="touch",function(e){var n=e.clientY,r=e.clientX,o=n,c=i();if(!(o<(a.height-2)*c.height||o>(a.height-1)*c.height)){var h=Math.ceil(r/(t.width/a.width))-1;j(h)}}({clientY:e.offsetY,clientX:e.offsetX})},g=function(t){return t.preventDefault()};window.addEventListener("resize",f),t.addEventListener("pointerdown",b),t.addEventListener("touchstart",g);var v=new s.b,m=new s.a,p=!0,y=setInterval((function(){var t=!1;for(var e in x){var n=x[e].split(" "),i=Object(h.a)(n,2),a=i[0],r=i[1];if(Object(s.c)(v.key(a),v.key(e),m.button(r)).query()){t=!0,p&&j(+e-1);break}}p=!t,t&&m.isConnected()&&(l="gamepad")}),10),k=function(){l="keyboard",u()};return window.addEventListener("keydown",k),function(){window.removeEventListener("resize",f),t.removeEventListener("pointerdown",b),t.removeEventListener("touchstart",g),window.removeEventListener("keydown",k),clearInterval(y)}}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(j.a,{className:t.backButton,hidden:0!==r,component:u.a,to:"/",color:"primary",children:[Object(m.jsx)(v.a,{}),"Back"]}),Object(m.jsx)(b.a,{container:!0,justify:"center",children:Object(m.jsx)("canvas",{ref:e,className:t.canvas})}),Object(m.jsx)(g.a,{align:"center",color:"error",className:t.score,variant:"h3",children:r})]})},k=n(47),E=n(91),S=n(90),G=n(88),L=[{label:"Peak",id:"peak"}],W=function(t){return Object(m.jsx)(g.a,Object(k.a)({gutterBottom:!0,align:"center"},t))},C=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(b.a,{container:!0,direction:"column",justify:"flex-start",alignContent:"center",style:{padding:50},children:[Object(m.jsx)(W,{variant:"h3",children:"Piano Tiles online"}),Object(m.jsx)(W,{variant:"h5",color:"textSecondary",children:"Select Game Mode"}),L.map((function(t){var e=t.id,n=t.label;return Object(m.jsx)(j.a,{component:u.a,to:"/game/".concat(e),variant:"outlined",size:"large",children:n},e)})),Object(m.jsx)(W,{variant:"h5",color:"textSecondary",children:"Game Grid Configuration"}),Object(m.jsxs)(b.a,{container:!0,style:{width:"auto"},children:[["width","height"].map((function(t){var e="height"===t?2:1;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g.a,{children:t}),Object(m.jsx)(E.a,{defaultValue:w.tilesQuantity[t],valueLabelDisplay:"auto",step:1,min:e,max:8,onChange:function(e,n){return w.tilesQuantity[t]=n},marks:!0},t)]})})),Object(m.jsxs)(g.a,{children:[Object(m.jsx)(S.a,{defaultChecked:w.showKeyboardOrGamepadHints,onChange:function(t,e){return w.showKeyboardOrGamepadHints=e}}),"Show keyboard & gamepad hints"]})]}),Object(m.jsx)(G.a,{color:"textSecondary",href:"https://github.com/zardoy/piano-tiles",style:{position:"absolute",bottom:0,right:0},children:"View on GitHub"})]})})},B=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(c.a,{}),Object(m.jsx)(o.a,{children:Object(m.jsxs)(o.e,{children:[Object(m.jsx)(o.c,{path:"/",exact:!0,children:Object(m.jsx)(C,{})}),Object(m.jsx)(o.c,{path:"/game/:modeId",children:Object(m.jsx)(y,{})}),Object(m.jsx)(o.b,{from:"/",to:"/"})]})})]})};n(62);r.a.render(Object(m.jsx)(B,{}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.c4fa553c.chunk.js.map